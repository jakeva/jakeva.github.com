---
layout: post
title: "Building my own NAS"
description: "In which I Build a Networked Attached Storage from scratch"
category:
tags: [DIY]
---

## First a little background
I had a couple old NAS storage solutions I pulled out of, well, my storage unit a while back. Tried to set them up in my office and found them to be really difficult to use, but the data on them is still good. So I pulled the disks out and decided to look into upgrading to something newer. After some research, I concluded the existing out-of-the-box solutions available are overpriced for what they offer. I decided I wanted more control over the parts to reduce cost, as well as having more freedom in setting up the server software so I looked into building my own.

## Parts
I used [PC Partpicker](https://pcpartpicker.com) to help me narrow down what I was looking for. I went in blind hoping I'd find a tower suitable for what I wanted, and I think I found the perfect one. Everything else was selected to fit it.

<table class="table-dark">
  <tr>
    <th scope="col">Part</th>
    <th scope="col">Price</th>
  </tr>

  <tr>
    <td>
      <a href="https://pcpartpicker.com/product/yTdqqs/fractal-design-case-fdcanode804blw">Fractal Design Node 804 MicroATX Mid Tower Case</a>
      <p>This is particularly recommended for a NAS build. Both on Amazon and Newegg, reviews were a bit mixed but for a little over $100 I decided I could handle a few imperfections. Right now I have 7 3.5" drives ranging from 1 to 4 TB, and 1 2.5" SSD I want to use as the boot disk. Between disk bay utilization and cooling options, this tower promises some pretty interesting flexibility. In their own words, it has a "Unique hard drive mounting system, fitting up to 8 x 3.5", 4 x 2.5" or up to 10 x 3.5", 2 x 2.5" drives HDD/SSD" all inside a 13.5 x 12 x 15.3in package. That's 12 slots for hard drives! That should fit my needs perfectly with plenty of room for future upgrades and fit nicely under my desk.</p>
    </td>
    <td>$109.99</td>
  </tr>
  <tr>
    <td>
      <a href="https://pcpartpicker.com/product/RkJtt6/amd-ryzen-3-2200g-35ghz-quad-core-processor-yd2200c5fbbox">AMD Ryzen 3 2200G 3.5 GHz Quad-Core Processor</a>
      <p>At first I was just interested in picking up a 2 core CPU since I intend on doing nothing with this machine except serving up files to my home network. I'm the only user, so I don't need much CPU. However, I found it tricky to pair up a 2 core CPU with a motherboard so I just picked a reasonable quad core. It might be a little over kill, but that's ok.</p>
    </td>
    <td>$107.68</td>
  </tr>
  <tr>
    <td>
      <p>I had more trouble finding the right motherboard. I ordered a cheap one early on, forgetting to check how many SATA slots it had. What I ordered was the</p>
      <a href="https://pcpartpicker.com/product/RD97YJ/asrock-b450m-hdv-r40-micro-atx-am4-motherboard-b450m-hdv-r40">ASRock B450M-HDV R4.0 Micro ATX AM4 Motherboard</a>
      <p>which comes with 4 SATA 6 Gb/s slots. That won't be enough, but for the price, I can slap some extra slots in with theâ€¦</p>
    </td>
    <td>$69.97</td>
  </tr>
  <tr>
    <td>
      <a href="https://www.amazon.com/dp/B07S8CB398/">Ziyituod SATA3.0 Card</a>
      <p>6 SATA 6 Gb/s PCIe controller. Problem solved.</p>
    </td>
    <td>$39.95</td>
  </tr>
  <tr>
    <td>
      <a href="https://www.amazon.com/dp/B019FRDFU0">Crucial 4GB Single DDR4</a>
      <p>Like I don't need much processing power, I don't need much ram. Two sticks of 4 GB DDR4 should do it.</p>
    </td>
    <td>$39.98</td>
  </tr>
  <tr>
    <td>
      <a href="https://www.amazon.com/dp/B01KVNCEIG">be Quiet! Pure Rock Slim - CPU Cooler</a>
      <p>A concern I had was how loud this thing was going to be. I picked a CPU cooler that promises it gets no louder than 25 Db. The fans that come with the tower might be a different story, but I can worry about those later if it's an issue. Anyway, this thing is pretty cheap too.</p>
    </td>
    <td>$33.28</td>
  </tr>
  <tr>
    <td>
      <a href="https://www.newegg.com/evga-supernova-850-g2-220-g2-0850-xr-850w/p/N82E16817438018?Item=N82E16817438018">EVGA SuperNOVA 800W</a>
      <p>And the final piece is the power supply. Need enough power for up to ten drives, so here we are.</p>
    </td>
    <td>$159.99</td>
  </tr>
</table>


This brings the total to a little over $500. By comparison you can get an [8 bay NAS by Synology](https://www.amazon.com/Synology-Bay-Diskstation-Diskless-DS1819/dp/B07KMKDW42/) for $931.


## Now I wait
I haven't got all the parts yet, but I'll post an update when I get it built and have a chance to play with it. I expect there will be some tradeoffs, like the interior will probably be a bit cramped and hard to work with. Maybe it will get a little hot or loud with the four fans. But I'm excited, I didn't think I'd be able to find a solution that would fit 10 drives in around a square foot of floor space. At less than $500, for me it's a no brainer.

## And what's next?
Of course, I'm already thinking down the road. Right now I only have a little over 12 TBs of hard drives ready to put to use (consisting mostly of Bluray backups and music), but at $485 for a [16 TB Drive](https://www.amazon.com/Seagate-IronWolf-16TB-Internal-Drive/dp/B07SGGWYC1) I am imagining a world where I spend a small fortune for a +13x increase and while I'll probably never need it, it is pretty fun to imagine.

# Small Update
Ok so I bought two of the 16 TB drives intending to get a simple mirror up. Funny story, I snapped the plastic on the sata connector of one of them trying to fit it into the case. It is pretty tight in there. Anyway, I bought a third to replace it. But by the time it arrived I decided it was worth trying to salvage the broken one. The pins were still there and I had the broken off plastic piece, so I sort of put it back together delicately and slid it all back in. It worked! The system connected to the drive and now I've got a healthy 32 TB Raid Z1 pool running in my FreeNAS!

I'm working now on setting up torrenting over OpenVPN among other things. I'll write some of that up in separate blog posts.

{% include JB/setup %}
