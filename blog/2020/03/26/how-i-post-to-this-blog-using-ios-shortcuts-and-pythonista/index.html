

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="true">
  <title>
    
    How I post to this blog using iOS Shortcuts and Pythonista -
    
    Jake Van Alstyne
  </title>
  
  <meta name="description" content="In which I automate posting to my blog">
  <meta name="author" content="Jake Van Alstyne">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


  <script src="/assets/themes/jakeva/js/jquery.min.js"></script>
  <script src="/assets/themes/jakeva/js/script.js"></script>
  <script src="/assets/themes/jakeva/bootstrap/js/bootstrap.min.js"></script>

  <link href="/assets/themes/jakeva/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/themes/jakeva/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/assets/themes/jakeva/css-social-buttons/css/zocial.stripped.css" />
  <link href="/assets/themes/jakeva/css/pygments.css" rel="stylesheet" type="text/css" media="all">
  <link href="/assets/themes/jakeva/css/style.css" rel="stylesheet" type="text/css" media="all">

</head>

<body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>


        <a class="brand" href="/">Jake Van Alstyne</a>


        <div class="nav-collapse">
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/CV/">CV</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/contact/">Contact</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



          </ul>
          <ul class="nav pull-right social visible-desktop">
            
            <li>
              <a href="https://github.com/jakeva" class="zocial github icon" target="_blank">
                <span class="hidden-desktop">Github</span>
              </a>
            </li>
            
            
            
            <li>
              <a href="https://twitter.com/jake_va" class="zocial twitter icon" target="_blank">
                <span class="hidden-desktop">Twitter</span>
              </a>
            </li>
            
            
            
            <li>
              <a href="http://www.linkedin.com/in/jakeva" class="zocial linkedin icon"
                target="_blank">
                <span class="hidden-desktop">LinkedIn</span>
              </a>
            </li>
            
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="content-container">
    <div class="content">
      

<div class="page-header">
  <h1>
    How I post to this blog using iOS Shortcuts and Pythonista
    
  </h1>
</div>

<div class="row">
  <span class="span10">
    <p>I’ve had this blog for many years, and basically never posted anything. I wanted to become better about that, so I’ve been writing more haikus and trying to write up some of my home projects. My blog uses <a href="https://jekyllrb.com">Jekyll</a> and is hosted on <a href="https://pages.github.com">Github Pages</a> which already makes it pretty easy to write content but I wanted to see if I could make it even easier. I started with a “create new haiku” shortcut. This way anytime I have an idea for a haiku it doesn’t matter where I am, as long as I have an internet connection on my phone I can post a new one easily.</p>

<p>So, I began playing with iOS Shortcuts. I wanted a button on my phone that would let me write and post to my blog without needing anything else. The solution I came up with uses a bit of Python in <a href="http://omz-software.com/pythonista/">Pythonista</a> for some formatting, as well as <a href="https://workingcopyapp.com">Working Copy</a> for the git actions.</p>

<p>Unfornately, the only way to share an iOS shortcut is to share it directly. I wanted to export and paste a JSON payload here or something so others could edit and import easily, but it looks like the only way is to share a public link to it. So, here’s my <a href="https://www.icloud.com/shortcuts/7d86a57504eb47098bc7d1290e3239d6">shortcut</a> for writing and posting a haiku. With a little editing it should be easy enough to change if you wanted to rework it to post to your own blog. It assumes you have the Working Copy app I linked above, as well as a Pythonista script.</p>

<p>Here are the actions it performs:</p>
<ul>
  <li>Pull the latest changes from your blog repo</li>
  <li>Ask for the name of the Haiku</li>
  <li>Executes a search in <a href="https://giphy.com">Giphy</a> for the given title and lets you choose your favorite gif</li>
  <li>Stages the chosen gif in <code class="language-plaintext highlighter-rouge">/assets</code> in your repo</li>
  <li>Asks for the content of the Haiku. Adding an empty line between each line of content renders the content on new lines. I haven’t figured this part out yet, but if you don’t do this the whole haiku ends up on one line.</li>
  <li>It then sends the input to the Pythonista script to format it as Jekyll front matter</li>
  <li>It takes the resulting formatted content and stages it as a new file in your repo</li>
  <li>It commits the changes to your repo and pushes to remote</li>
  <li>It then texts my girlfriend to let her know there’s a new haiku (I haven’t tested this with other people, but I expect that unless you have her number it won’t work for you)</li>
</ul>

<p>So now the only piece missing is the Pythonista script. Here it is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from webbrowser import open
from datetime import date
from urllib.parse import quote, unquote
import sys
import x_callback_url

title=sys.argv[1]
body=sys.argv[2]
gif=quote(sys.argv[3])

haiku='''---
layout: haiku
category: Haikus
title: ''' + title + '''
---



''' + body + '''

![--''' + title + '''--](\{\{ site.url \}\}/assets/''' + gif + '''.gif)'''

x_success = sys.argv[-1] # shortcuts-production://x-callback-url/ic-success/&lt;UUID&gt;
x_cancel = x_success.replace('ic-success', 'ic-cancel')
x_error = x_success.replace('ic-success', 'ic-error')

x_success += '?x-source=Pythonista3'
x_success += '&amp;result=' + quote(haiku)
x_success += '&amp;datetime=' + quote(str(date.today().strftime('%Y-%m-%d')))

open(x_success)
</code></pre></div></div>

<p>I’ve been having fun with this, I’ve also made a version that will make a full blog post like this one but haven’t used it much since writing long form on an iOS device is not that convenient for me. Anyway, if you’re reading this feel free to play with my shortcut and python script! I’d love to hear about any projects you use them for!</p>


    <div class="pagination btn-group">
      
        <a class="btn prev" href="/blog/2020/03/14/gpg-yubikey-you/" title="GPG & YubiKey & You">&larr; Previous</a>
      
        <a class="btn" href="/archive/">Archive</a>
      
        <a class="btn next" href="/haikus/2020/03/26/Earthquakes/" title="Earthquakes">Next &rarr;</a>
      
    </div>
    


  
<div id="disqus_thread"></div>
<script type="text/javascript">
        var disqus_shortname = 'jakevanalstyne';
        var disqus_title = 'How I post to this blog using iOS Shortcuts and Pythonista';
        var disqus_url = '/blog/2020/03/26/how-i-post-to-this-blog-using-ios-shortcuts-and-pythonista/';
        var disqus_identifier = 'jakevanalstyne'-'How I post to this blog using iOS Shortcuts and Pythonista';
    
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </span>

  <span class="span2">
    <section>
      <h4>Published</h4>
      <div class="date"><span>26 March 2020</span></div>
    </section>
    
      <section>
        <h4>Category</h4>
        <span class="category">
          Blog
        </span>
      </section>
    
    
  </span>
</div>


    </div>

    <footer class="footer">
      <ul class="footer-nav">
        
        
        


  
    
      
    
  
    
      
      	
      	<li><a href="/archive/">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories/">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages/">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags/">Tags</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



      </ul>
      <p>
        &copy; Jake Van Alstyne 2010-2020
      </p>
    </footer>
  </div> <!-- /container -->
  


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39509409-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>

</html>

